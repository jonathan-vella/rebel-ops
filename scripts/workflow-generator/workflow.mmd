%%{init: {'theme':'neutral'}}%%
graph LR
    subgraph "Step 1: Requirements"
        P["Project Planner"]
    end
    subgraph "Step 2: Architecture"
        A["azure-principal-<br/>architect"]
    end
    subgraph "Step 3: Design Artifacts"
        D["ğŸ“Š diagram-<br/>generator<br/>(-des)"]
        ADR1["ğŸ“ adr-<br/>generator<br/>(-des)"]
        COST["ğŸ’° cost-estimate"]
    end
    subgraph "Step 4: Planning"
        B["bicep-plan"]
        GOV["ğŸ”’ Azure Policy<br/>(governance)"]
    end
    subgraph "Step 5: Implementation"
        I["bicep-implement"]
    end
    subgraph "Step 6: Deploy"
        DEP["ğŸš€ Deploy<br/>to Azure"]
    end
    subgraph "Step 7: As-Built Artifacts"
        D2["ğŸ“Š diagram-<br/>generator<br/>(-ab)"]
        ADR2["ğŸ“ adr-<br/>generator<br/>(-ab)"]
        WL["ğŸ“š workload-docs"]
    end

    P -->|requirements| A
    A -.->|optional| D
    A -.->|optional| COST
    A --> B
    D -.-> B
    ADR1 -.-> B
    COST -.-> B
    GOV -.->|constraints| B
    B -->|plan| I
    I -->|code| DEP
    DEP -.->|optional| D2
    DEP -.->|optional| ADR2
    DEP -.->|optional| WL

    style P fill:#e1f5fe
    style A fill:#fff3e0
    style D fill:#f3e5f5
    style ADR1 fill:#e0f2f1
    style COST fill:#fff9c4
    style B fill:#e8f5e9
    style GOV fill:#e0f7fa
    style I fill:#fce4ec
    style DEP fill:#c8e6c9
    style D2 fill:#f3e5f5
    style ADR2 fill:#e0f2f1
    style WL fill:#e3f2fd

